(function(d){"use strict";var h=h||{};h.init=function(){h.$body=d(document.body),h.$window=d(window),h.$header=d("#masthead");this.scrollTop();this.activeHeaderMenu();this.searchToggle();this.headerSticky();this.menuBlock();this.mobileMenu();this.pageHeader();this.widgetOffice();this.singlePortfolioGallery();this.portfolioFilter();this.imagesPopUp();this.productQuantity();this.singleGallery()};h.scrollTop=function(){var e=d("#scroll-top");h.$window.on("scroll",function(){if(h.$window.scrollTop()>h.$window.height()){e.addClass("show-scroll")}else{e.removeClass("show-scroll")}});e.on("click",function(e){e.preventDefault();d("html, body").stop().animate({scrollTop:0},800)})};h.menuBlock=function(){var e=d(".menu-block-right"),i=d(".menu-block-left"),t=d(".container").width(),a=(h.$window.width()-t)/2;h.$window.on("resize",function(){e.css({width:a,right:a*-1});i.css({width:a,left:a*-1})}).trigger("resize")};h.searchToggle=function(){d("a.toggle-search").on("click",function(e){e.preventDefault();d(this).parent().toggleClass("show-search")})};h.mobileMenu=function(){var i=d("#primary-mobile-nav");h.$header.on("click","#mf-navbar-toggle",function(e){e.preventDefault();i.toggleClass("open");h.$body.toggleClass("open-canvas-panel")});i.find(".menu .menu-item-has-children > a").prepend('<span class="toggle-menu-children"></span>');i.on("click",".menu-item-has-children > a, .menu-item-has-children > span",function(e){e.preventDefault();t(d(this))});i.on("click",".close-canvas-mobile-panel",function(e){e.preventDefault();h.$body.removeClass("open-canvas-panel");d("#primary-mobile-nav").removeClass("open")});d("#off-canvas-layer").on("click",function(e){e.preventDefault();h.$body.removeClass("open-canvas-panel");d("#primary-mobile-nav").removeClass("open")});h.$window.on("resize",function(){if(h.$window.width()>1200){if(i.hasClass("open")){i.removeClass("open");h.$body.removeClass("open-canvas-panel")}}});function t(e){e.closest("li").siblings().find("ul").slideUp();e.closest("li").siblings().removeClass("active");e.closest("li").siblings().find("li").removeClass("active");e.closest("li").children("ul").slideToggle();e.closest("li").toggleClass("active")}};h.headerSticky=function(){if(!h.$body.hasClass("header-sticky")){return}var e,i,t,a,n,s,o;h.$window.on("resize",function(){o=h.$header.find(".site-menu").outerHeight(true);e=h.$header.outerHeight(true);i=h.$header.find(".site-contact").outerHeight(true);if(h.$body.hasClass("header-v1")||h.$body.hasClass("header-v5")){a=i}else{a=e}d("#mf-header-minimized").height(a)}).trigger("resize");h.$window.on("scroll",function(){t=d("#topbar").outerHeight(true);o=h.$header.find(".site-menu").outerHeight(true);i=h.$header.find(".site-contact").outerHeight(true);s=i*-1;t=t==undefined?0:t;if(h.$body.hasClass("admin-bar")){s=s+32}if((h.$body.hasClass("header-v1")||h.$body.hasClass("header-v2"))&&h.$window.width()>1199){n=t+i}else if(h.$body.hasClass("header-v5")&&h.$window.width()>1199){n=t+i-o*.5}else{n=t}if(h.$window.scrollTop()>n){h.$header.addClass("minimized");d("#mf-header-minimized").addClass("minimized");if((h.$body.hasClass("header-v1")||h.$body.hasClass("header-v2")||h.$body.hasClass("header-v5"))&&h.$window.width()>1199){h.$header.css("top",s)}}else{h.$header.removeClass("minimized");d("#mf-header-minimized").removeClass("minimized");if(h.$body.hasClass("header-v1")||h.$body.hasClass("header-v2")||h.$body.hasClass("header-v5")){h.$header.removeAttr("style")}}})};h.pageHeader=function(){d(".page-header.parallax").find(".featured-image").parallax("50%",.6);d(".mf-service-banner").parallax("50%",.6)};h.widgetOffice=function(){var e=d(".office-location");e.each(function(){var e=d(this),t=e.find(".office-switcher ul li"),i=t.filter(":first"),a=e.find(".office-switcher a"),n=e.find(".topbar-office");i.addClass("active");n.filter(":first").addClass("active");a.html(i.html());a.on("click",function(e){var i=d(this);e.preventDefault();i.parent().toggleClass("show-office")});t.on("click",function(){var e=d(this),i=e.attr("data-tab");if(e.hasClass("active")){return}a.html(e.html());a.parent().toggleClass("show-office");t.removeClass("active");n.removeClass("active");e.addClass("active");d("#"+i).addClass("active")})})};h.activeHeaderMenu=function(){var e,i,t,a,n,s,o,l=h.$header.find("ul.menu");l.find("li:last-child").addClass("last-child");l.append('<li id="mf-active-menu" class="mf-active-menu"></li>');var r=d("#mf-active-menu"),c;n=0;if(l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").length>0){s=l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").outerWidth();t=l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").children("a").outerWidth();c=(s-t/2)/2;t=t/2;r.width(t).css("left",l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").position().left+c).data("origLeft",r.position().left).data("origWidth",r.width());n=r.data("origWidth")}l.children("li").on("hover",function(){e=d(this);o=e.outerWidth();a=e.children("a").outerWidth();c=(o-a/2)/2;a=a/2;i=e.position().left+c;r.stop().animate({left:i,width:a})},function(){r.stop().animate({left:r.data("origLeft"),width:n})})};h.singlePortfolioGallery=function(){d(".single-portfolio .entry-thumbnail.portfolio-gallery").owlCarousel({rtl:true,items:1,loop:false,nav:false,autoplay:false,autoplayTimeout:0,autoplaySpeed:0,dots:true,navSpeed:800,dotsSpeed:800})};h.singleGallery=function(){d(".format-gallery.owl-carousel").owlCarousel({rtl:true,loop:false,items:1,nav:false,dots:true})};h.portfolioFilter=function(){var e=d(".mf-list-portfolio");if(!e.length){return}var i={itemSelector:".project-wrapper",transitionDuration:"0.7s"};e.imagesLoaded(function(){d(this.elements).isotope(i)});var a=d(".nav-filter");a.on("click","a",function(e){e.preventDefault();var i=d(this),t=i.attr("data-filter");a.find("a").removeClass("active");d(this).addClass("active");i.closest(".nav-section").next(".mf-list-portfolio").isotope({filter:t})})};h.imagesPopUp=function(){var e=d(".mf-gallery-popup");if(!e.length){return}var n=e.find("a.photoswipe"),s=[];n.each(function(){var e=d(this),i=e.attr("data-large_image_width"),t=e.attr("data-large_image_height");s.push({src:e.attr("href"),w:i,h:t})});e.on("click","a.photoswipe",function(e){e.preventDefault();var i=n.index(d(this)),t={index:i,bgOpacity:.85,showHideOpacity:true,mainClass:"pswp--minimal-dark",barsSize:{top:0,bottom:0},captionEl:false,fullscreenEl:false,shareEl:false,tapToClose:true,tapToToggleControls:false};var a=new PhotoSwipe(document.getElementById("pswp"),window.PhotoSwipeUI_Default,s,t);a.init()})};h.productQuantity=function(){h.$body.on("click",".quantity .increase, .quantity .decrease",function(e){e.preventDefault();var i=d(this),t=i.siblings(".qty"),a=parseInt(t.val(),10),n=parseInt(t.attr("min"),10),s=parseInt(t.attr("max"),10);n=n?n:1;s=s?s:a+1;if(i.hasClass("decrease")&&a>n){t.val(a-1);t.trigger("change")}if(i.hasClass("increase")&&a<s){t.val(a+1);t.trigger("change")}})};d(function(){h.init()})})(jQuery);